{% include 'includes/header.html' %}
{% load tracker_tags %}

{% block content %}
  <div class="container mt-4">
    <section class="user-profile text-center">
        <p>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <strong> {{ username }} </strong></p>
        <p>–í—Å–µ–≥–æ –∑–∞–¥–∞—á:<strong> {{ tasks.count }} </strong></p>
    </section>

    <div class="card">
      <div class="card-body">
        <section class="task-list">
          {% if tasks %}
            {% for task in page_obj %}
              <div class="task-item">
                <p>{{ task.title|truncatechars_html:150 }}</p>
                {% include 'tasks/short_detail.html' %}
                <br>
                {% if not forloop.last %}<hr>{% endif %}
              </div>
            {% endfor %}
          {% else %}
            <div class="text-center">
                –£ –≤–∞—Å –Ω–µ—Ç –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á! üëç
            </div>
          {% endif %}
        </section>
      </div>
    </div>
  </div>
  <div class="pagination justify-content-center align-items-center mt-4">
    <span class="step-links">
    {% if page_obj %}
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; –ø–µ—Ä–≤–∞—è</a>
            <a href="?page={{ page_obj.previous_page_number }}">–ø—Ä–µ–¥—ã–¥—É—â–∞—è</a>
        {% endif %}

        <span class="current">
            {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">—Å–ª–µ–¥—É—é—â–∞—è</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">–ø–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
        {% endif %}
    {% endif %}

    </span>
</div>
{% endblock %}

{% include 'includes/footer.html' %}